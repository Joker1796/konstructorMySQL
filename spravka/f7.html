<!DOCTYPE html>

<html>

	<head>
		<meta charset="UTF-8">
		<title>Конструктор запросов</title>
		<link rel="stylesheet" href="../style.css">
		<script src="../jquery-3.2.1.min.js"></script>
		<script src="../script_heder_footer.js"></script>
		<script src="../script.js"></script>
		
		
	</head>
	
<body>

<!--================= ШАПКА ===================-->
	<header>
		<div class="hed inner_hed">
		</div>
	</header>
	
<!--================= КОНТЕНТ ===================-->
<div class="hr_zagolovok">Вставка строки в таблицу INSERT</div>
	<div class="content">
		<p>
			Команда <b>MySQL INSERT</b> производит вставку новых строк в таблицу.
		</p>
			<h2>Синтаксис команды INSERT</h2>
			<hr>
<div class="vid_zap">
<pre>
INSERT [LOW_PRIORITY | DELAYED] [IGNORE]
    [INTO] tbl_name [(col_name,...)]
    VALUES (expression,...),(...),...
</pre>
</div>
либо
<div class="vid_zap">
<pre>
INSERT [LOW_PRIORITY | DELAYED] [IGNORE]
    [INTO] tbl_name
    SET col_name=expression, col_name=expression, ...
</pre>
</div>
либо
<div class="vid_zap">
<pre>
INSERT [LOW_PRIORITY | DELAYED] [IGNORE]
    [INTO] tbl_name [(col_name,...)]
    SELECT ...
</pre>
</div>
			<h2>Общие положения работы команды INSERT:</h2>
			<hr>
		<p>
			<b>tbl_name</b>
			- Задает имя таблицы, в которую будет вставлена новая строка. На момент запуска команды INSERT 
			таблица с таким именем должна существовать в базе данных.
		</p><p>
			<b>LOW_PRIORITY</b>
			- Если указан этот параметр, то вставка новой записи будет отложена до тех пор, пока другие 
			сценарии не закончат чтение из этой таблицы. Надо отметить, что если таблица часто используется, 
			то при указании этого параметра может пройти достаточно много времени, прежде чем данная команда 
			будет выполнена.
		</p><p>
			<b>DELAYED</b>
			- Если указан этот параметр, то после выполнения команды <b>INSERT</b> сценарий сразу же получит ответ 
			от БД о успешной вставке новой записи, а запись будет вставлено только после завершения 
			использования данной таблицы другим сценарием. Это может быть удобно, если требуется высокая 
			скорость работы скрипта. Данный параметр работает только с таблицами типа ISAM и MyISAM. 
			Следуем отметить, что если таблица, в которую происходит вставка записи, в данный момент не 
			используется другими запросами, то команда INSERT DELAYED будет работать медленнее, нежели <b>INSER</b>. 
			Так что рекомендуется использовать параметр DELAYED только при большой нагрузке на таблицу.
		</p><p>
			<b>IGNORE</b>
			- Если некоторые поля таблицы имеют ключи PRIMARY или UNIQUE, и производится вставка новой 
			строки, в которой эти поля имеют дублирующее значение, то действие команды аварийно завершается и 
			выдается ошибка №1062 ("Duplicate entry 'val' for key N"). Если в команде INSERT указано ключевое
			 слово IGNORE, то вставка записей не прерывается, а строки с дублирующими значениями просто не 
			 вставляются.
		</p><p>
			Если MySQL был сконфигурирован с использованием опции DONT_USE_DEFAULT_FIELDS, то команда INSERT 
			будет генерировать ошибку, если явно не указать величины для всех столбцов, которые требуют 
			значений не-NULL.
		</p><p>
			Для того, чтобы узнать значение, присвоенное полю с ключом AUTO_INCREMENT, можно воспользоваться 
			функцией mysql_insert_id().
		</p><p>
			Для добавления новых записей в существующую таблицу при помощи команды <b>INSERT</b> существует три 
			основных синтаксиса:
		</p><p>
			<b>INSERT ... VALUES</b>
			- В этом случае в команде четко указывается порядок следования устанавливаемых полей и их значений.
		</p><p>
			Следующая команда вставит в таблицу users новую запись, присвоив полям name, age, country, city 
			значения Evgen, 26, Russia, Ryazan соответственно:
		</p>
<div class="vid_zap">
<pre>
INSERT INTO
    `users` (`name`, `age`, `country`, `city`)
VALUES
    ('Evgen', 26, 'Russia', 'Ryazan')
</pre>
</div>
		<p>
			Если для поля или группы полей, присутствующих в таблице, не установить значение, то используется 
			значение, установленное по умолчанию при создании таблицы:
		</p>
<div class="vid_zap">
<pre>
INSERT INTO
    `users` (`name`, `age`, `city`)
VALUES
    ('Evgen', 26, 'Ryazan')
</pre>
</div>
		<p>
			После выполнения этой команды поле country получит значение по умолчанию.
		</p><p>
			Если при выполнении команды <b>INSERT</b> не были указаны названия полей, то в VALUES() должны быть 
			указаны значения для всех полей таблицы.
		</p><p>
			Если список полей таблицы заранее не известен, то его можно узнать при помощи команды:
		</p>
<div class="vid_zap">
DESCRIBE `users`
</div>
		<p>
			Результатом этой команды будет таблица примерно следующего содержания:
		</p>
<div class="vid_zap">
<pre>
+---------+-------------+------+-----+---------+-------+
| Field   | Type        | Null | Key | Default | Extra |
+---------+-------------+------+-----+---------+-------+
| name    | varchar(50) | YES  |     | NULL    |       |
| age     | int(3)      | YES  |     | NULL    |       |
| country | varchar(64) | NO   |     |         |       |
| city    | varchar(64) | NO   |     |         |       |
+---------+-------------+------+-----+---------+-------+
4 rows in set (0.01 sec)
</pre>
</div>
		<p>
			Здесь обработав полученные данные в поле Field можно получить все поля таблицы.
		</p><p>
			<b>INSERT ... SET</b>
			- В этом случае в команде каждому полю, присутствующему в таблице, присваивается значение в виде 
			имя поля='значение'.
		</p><p>
			Следующий пример по результату идентичен первому примеру для <b>INSERT ... VALUE</b>:
		</p>
<div class="vid_zap">
<pre>
INSERT INTO
    `users`
SET
   `name` = 'Evgen',
   `age` = 26,
   `country` = 'Russia',
   `city` = 'Ryazan'
</pre>
</div>
		<p>
			Так же, как и с <b>INSERT ... VALUES</b>, если одному или нескольким полям не задать значение, то 
			установится значение по умолчанию.
		</p><p>
			В качестве значений полям можно присваивать не только значения, но и выражения. В выражениях 
			разрешено использовать значения полей таблицы, которые уже были установлены в этой команде:
		</p>
<div class="vid_zap">
<pre>
INSERT INTO
    `tbl_name`
SET
   `field1` = 4,
   `field2` = `field1`*`field1`
</pre>
</div>
или
<div class="vid_zap">
<pre>
INSERT INTO
    `tbl_name` (`field1`, `field2`)
VALUES
    (4, `field1`*`field1`)
</pre>
</div>
		<p>
			<b>INSERT ... SELECT</b>
			- Такой синтаксис позволяет внести в таблицу большое количество записей за один раз, причем 
			из разных таблиц.
		</p><p>
			Следующий пример запишет в таблицу users_new все записи из таблицы users, в которых поле country
			 равно "Russia".
		</p>
<div class="vid_zap">
<pre>
INSERT INTO
    `users_new`
SELECT
    *
FROM
    `users`
WHERE
    `country` = 'Russia'
</pre>
</div>
		<p>
			Если для таблицы, в которую происходит вставка записей, не указан список полей, то значения 
			для всех полей будут определены на основании результата работы SELECT.
		</p><p>
			Если некоторые поля не определены, то для них будут принято значение по умолчанию.
			Особенности синтаксиса INSERT ... SELECT:
		</p><p>
			Имя таблицы, в которую вставляются записи, не должна присутствовать в списке таблиц FROM части 
			SELECT, т.к. это может привести к ошибке вставки (ведь условие WHERE части SELECT может найти 
			записи, которые уже вставлены этой командой ранее).
		</p><p>
			Другим сценариям запрещено производить вставку в таблицы, учавствующие в запросе, во время 
			выполнения этого запроса.
		</p><p>
			Столбцы AUTO_INCREMENT работают, как обычно.
		</p>
		<hr>
		<div class="next">
			<button class="button"><a href="f6_4.html">< Предыдующая статья</a></button>
			<button class="button"><a href="f8.html">Следующая статья ></a></button>
		</div>
	</div>
	
<!--================= ПОДВАЛ ===================-->
	<footer>
		<div class="foot">
		</div>	
	</footer>
<div id="toTop"><img class="strelka" src="../up.png"></div >	
</body>
</html>
<!---->